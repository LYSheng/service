@{
    Layout = null;
}
<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">
    <meta content="yes" name="apple-mobile-web-app-capable">
    <meta content="black" name="apple-mobile-web-app-status-bar-style">
    <meta content="telephone=no" name="format-detection">
    <title>支付结果</title>
    <meta content="支付结果" name="keywords">
    <meta content="支付结果" name="description">
    <link rel="stylesheet" href="/content/styles/reset.css">
    <link rel="stylesheet" href="/content/styles/payments.css?version=1">
    <script src="/scripts/jquery-2.1.1.js"></script>
    <script src="/scripts/knockout-2.2.0.debug.js"></script>
    <script src="/scripts/knockout.validation.js"></script>

    <style>
        .codeBody {
            margin: .3rem auto 0 auto;
            width: 9.8rem;
        }

        .codeImg {
            width: 6.5rem;
            height: 6.5rem;
            padding: .1rem;
            border: 1px solid #f00;
            border-radius: 5px;
            margin: 0 auto;
        }

            .codeImg img {
                width: 100%;
                height: 100%;
            }

        .attTitle {
            width: 7rem;
            margin: 0 auto .3rem auto;
        }
    </style>
</head>
<body>
    <header class="u-header clearfix">
        <div class="u-hd-tit"><span class="fs36" style="font-weight:normal;">支付结果</span></div>
    </header>
    <section class="content">
        <div class="nodata success" style="margin-bottom:0!important;">
            @if (ViewData["IsSuccess"] != null && (bool)ViewData["IsSuccess"])
            {
                <p class="success-icon wddd"></p>
                <p class="nodatatip successtip">恭喜您支付成功</p>
                <p class="num">@((ViewBag.OrderCode != null && ViewBag.OrderCode.StartsWith("RC")) ? "充值流水号" : "订单号")：@ViewData["OrderCode"]</p>
            }
            else
            {
                <p class="failed-icon wddd"></p>
                <p class="nodatatip successtip">很遗憾，订单支付失败!</p>
            }
            <!-- ko if: showCode() == true-->
            <div class="codeBody">
                <p class="attTitle ac fs14 red" style="width:8.5rem;">
                    请长按二维码图片<br /><span class="red">关注</span><span id="attTitle" class="red">Malls·五洲精选</span><span class="red">公众号</span><br />
                    进入商城查看订单进度
                </p>
                <div class="codeImg">
                    <img src="/Content/images/tdigCode.jpg">
                </div>
            </div>
            <!-- /ko -->
            <div class="pl20 pr20" style="padding-top:1rem;">
                @if (Request["payToType"] == ((int)TL.Domain.Enum.EnumPayToType.MemberCard).ToString())
                {
                    <a href="@Html.Raw(ViewBag.H5Url)UserAbout/myBank" class="confirm" data-isclosed=true style="margin-bottom:0.5rem!important;">返回Malls·钱包</a>
                    <a href="@Html.Raw(ViewBag.H5Url)" class="confirm" data-isclosed=true style="margin-bottom:0.5rem!important;">返回首页</a>
                }
                else
                {
                    if (ViewBag.OrderCode != null && !ViewBag.OrderCode.StartsWith("RC"))
                    {
                        <a href="@Html.Raw(ViewBag.H5Url)userAbout/showOrderDetail?orderId=@ViewData["OrderId"]" class="confirm" data-isclosed=false>查看订单</a>
                    }
                    else
                    {
                    }
                    <a href="@Html.Raw(ViewBag.H5Url)userAbout/orderList" class="confirm" data-isclosed=true style="margin-bottom:0.5rem!important;">关闭</a>
                }
            </div>
        </div>

        <input type="hidden" id="orderId" value="@ViewData["OrderId"]" />
        <input type="hidden" id="IsSuccess" value="@Request["isSuccess"]" />
       
    </section>
    <script>
        var payRModel;
        var isSuccess = $("#IsSuccess").val();
        var payResultModel = function () {
            var self = this;
            self.showCode = ko.observable();
        }
        $(function () {
            payRModel = new payResultModel();
            payRModel.showCode(false);
            ko.applyBindings(payRModel);
            try {
                if (typeof mobile.appShareClickDo == "function") {
                    payRModel.showCode(false);
                    return;
                }
            } catch (e) {
                //payRModel.showCode(false);
            }
            setTimeout(function () {
                if (typeof appShareClickDo == "function") {
                    payRModel.showCode(false);
                    return;
                }
            }, 100)
            if (isSuccess == "true") {
                payRModel.showCode(true);
            }
        })

    </script>
</body>
</html>