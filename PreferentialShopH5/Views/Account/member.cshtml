@{
    ViewBag.Title = "会员";
    Layout = "../Shared/_LayoutNone.cshtml";
}

@section Head
{
    
    <style type="text/css">
        .imgList img {
            width: 100%;
            float: left;
        }
        .charge{
            display:block;
            width:4.72rem;
            height:1.8rem;
            position:fixed;
            top:0;
            left:0;
            background:url("../Content/Images/member/fly.png") no-repeat;
            background-size:contain;
            z-index:99;
        }
        .imgHeight {
            height:2.16rem;
        } 
        .charge a {
            width: 100%;
            height: 100%;
            display: block;
        }
        /*chargeBtn*/
        .chargeTwo {
            display: block;
            width: 100%;
            height: 55px;
            position: fixed;
            bottom: 0;
            left: 0;
            background: #b4282d ;
            background-size: contain;
            z-index: 99;
        }
            .chargeTwo a {
                width: 100%;
                height: 100%;
                display: block;
                background: url("../Content/Images/chargeBtn.png") center center no-repeat;
                background-size:3.12rem 0.74rem;
            }
    </style>

}
<section>
    <div class="imgList clearfix">
        <img src="~/Content/Images/loading_new.png" class="scrollLoading" data-url="../Content/Images/member/index_02.jpg?v1.06" />
        <img src="~/Content/Images/loading_new.png" class="scrollLoading" data-url="../Content/Images/member/index_03.jpg?v1" />
        <img src="~/Content/Images/loading_new.png" class="scrollLoading" data-url="../Content/Images/member/index_04.jpg?v1" />
        @*<img src="~/Content/Images/loading_new.png" class="scrollLoading" data-url="../Content/Images/member/index_05.jpg?v1" />*@
        <img src="~/Content/Images/loading_new.png" class="scrollLoading" data-url="../Content/Images/member/index_06.jpg?v1" />
        <img src="~/Content/Images/loading_new.png" class="scrollLoading" data-url="../Content/Images/member/index_07.jpg?v1" />
        <img src="~/Content/Images/loading_new.png" class="scrollLoading" data-url="../Content/Images/member/index_08.jpg?v1" />
        <img src="~/Content/Images/loading_new.png" class="scrollLoading" data-url="../Content/Images/member/index_09.jpg?v1" />
        <img src="~/Content/Images/loading_new.png" class="scrollLoading" data-url="../Content/Images/member/index_10.jpg?v1" />
    </div>
    <div class="imgHeight"></div>
</section>
<div class="charge" id="charge">
    <a href="javascript:void(0)" class="toCharge"></a>
</div>
<div class="chargeTwo" id="chargeTwo">
    <a href="javascript:void(0)" class="toCharge"></a>
</div>

@section Scripts
{
    @WebHelper4H5.RegisterScripts("scrollLoading.js")
    <script src="@System.Configuration.ConfigurationManager.AppSettings["H5Url"]Scripts/cookieHandle.js?v=1.0"></script>
    <script>
        var serviceStoreUserId = getCookie("serviceStoreUserId") ? getCookie("serviceStoreUserId") : "";
        $(".toCharge").on("click", function () {
            if (!getCookie(".ASPXAUTHH5")) {
                autoLogin(this);
                return;
            }
            apiRequest({
                method: 'MyWallet/GetMySelServiceStore',
                data: { "IsInvestment": true ,"serviceStoreUserId":serviceStoreUserId},
                async: false,
                success: function (obj) {
                    console.log(obj.data.serviceStoreUserId)
                    if (obj.data.serviceStoreUserId > 0) {
                        window.location.href = "/userAbout/payCard?storeUserId=" + obj.data.serviceStoreUserId;
                    } else {
                        window.location.href = "/userAbout/chooseShop";
                    }
                    return false;
                },
                error: function (data) {
                    smGlobal.error("获取门店信息失败");
                }
            });
        })
        function autoLogin() {
            var openid = getCookie("OpenId") ? getCookie("OpenId") : "";
            
            apiRequest({
                method: 'User/Login3_1',
                async: false,
                data: { "OpenId": openid, "LoginSystem": 3 },
                success: function (list) {
                    if (list.isBizSuccess && list.isSkip) {

                    } else if (list.count > 1) {
                        window.location.href = "/account/login?isLogin=1&ReturnUrl=" + "/Account/member";
                        return;
                    }
                },
                error: function (data) {
                    window.location.href = "/account/login?isLogin=1&ReturnUrl=" + "/Account/member";
                    return;
                }
            });
        }
        $(".scrollLoading").scrollLoading();
        var oWrap = document.getElementsByTagName("body")
        var oChild = document.getElementById("charge");

        var maxLeft = document.body.clientWidth - oChild.clientWidth;
        var maxTop = $(window).height() - oChild.clientHeight;
        var startX = 0;
        var startY = 0;
        var x = 1;
        var y = 1;

        function random(min, range) {
            return Math.floor(Math.random() * range + min);
        }

        var timer = setInterval(function () {
            //边线
            if (startX > maxLeft || startX < 0) {
                x *= -1;
            }
            if (startY > (maxTop-55) || startY < 0) {
                y *= -1;
            }

            startX += x * 2;
            startY += y * 2;
            oChild.style.left = startX + "px";
            oChild.style.top = startY + "px";
        }, 100)

    </script>
}
